# Инструмент чтения нескольких файлов (`read_many_files`)

Этот документ описывает инструмент `read_many_files` для Gemini CLI.

## Описание

Используйте `read_many_files` для чтения содержимого из нескольких файлов, указанных путями или шаблонами glob. Поведение этого инструмента зависит от предоставленных файлов:

- Для текстовых файлов этот инструмент объединяет их содержимое в одну строку.
- Для файлов изображений (например, PNG, JPEG), PDF, аудио (MP3, WAV) и видео (MP4, MOV) он считывает и возвращает их в виде данных, закодированных в base64, при условии, что они явно запрошены по имени или расширению.

`read_many_files` может использоваться для выполнения таких задач, как получение обзора кодовой базы, поиск места реализации определенной функциональности, просмотр документации или сбор контекста из нескольких файлов конфигурации.

**Примечание:** `read_many_files` ищет файлы, соответствующие предоставленным путям или шаблонам glob. Путь к каталогу, такой как `"/docs"`, вернет пустой результат; инструменту требуется шаблон, такой как `"/docs/*"` или `"/docs/*.md"`, чтобы идентифицировать соответствующие файлы.

### Аргументы

`read_many_files` принимает следующие аргументы:

- `paths` (список[строка], обязательный): Массив шаблонов glob или путей относительно целевого каталога инструмента (например, `["src/**/*.ts"]`, `["README.md", "docs/*", "assets/logo.png"]`).
- `exclude` (список[строка], необязательный): Шаблоны glob для файлов/каталогов, которые нужно исключить (например, `["**/*.log", "temp/"]`). Они добавляются к исключениям по умолчанию, если `useDefaultExcludes` равно true.
- `include` (список[строка], необязательный): Дополнительные шаблоны glob для включения. Они объединяются с `paths` (например, `["*.test.ts"]` для явного добавления тестовых файлов, если они были широко исключены, или `["images/*.jpg"]` для включения определенных типов изображений).
- `recursive` (логическое значение, необязательный): Искать ли рекурсивно. Это в основном контролируется `**` в шаблонах glob. По умолчанию `true`.
- `useDefaultExcludes` (логическое значение, необязательный): Применять ли список шаблонов исключений по умолчанию (например, `node_modules`, `.git`, неизобразительные/не-pdf бинарные файлы). По умолчанию `true`.
- `respect_git_ignore` (логическое значение, необязательный): Учитывать ли шаблоны .gitignore при поиске файлов. По умолчанию true.

## Как использовать `read_many_files` с Gemini CLI

`read_many_files` ищет файлы, соответствующие предоставленным шаблонам `paths` и `include`, при этом учитывая шаблоны `exclude` и исключения по умолчанию (если включены).

- Для текстовых файлов: он считывает содержимое каждого найденного файла (пытаясь пропустить бинарные файлы, явно не запрошенные как изображения/PDF) и объединяет его в одну строку с разделителем `--- {filePath} ---` между содержимым каждого файла. По умолчанию используется кодировка UTF-8.
- Для файлов изображений и PDF: если явно запрошены по имени или расширению (например, `paths: ["logo.png"]` или `include: ["*.pdf"]`), инструмент считывает файл и возвращает его содержимое в виде строки, закодированной в base64.
- Инструмент пытается обнаружить и пропустить другие бинарные файлы (те, которые не соответствуют общим типам изображений/PDF или не были явно запрошены), проверяя наличие нулевых байтов в их исходном содержимом.

Использование:

```
read_many_files(paths=["Ваши файлы или пути здесь."], include=["Дополнительные файлы для включения."], exclude=["Файлы для исключения."], recursive=False, useDefaultExcludes=false, respect_git_ignore=true)
```

## Примеры `read_many_files`

Прочитать все файлы TypeScript в каталоге `src`:

```
read_many_files(paths=["src/**/*.ts"])
```

Прочитать основной README, все файлы Markdown в каталоге `docs` и конкретное изображение логотипа, исключая определенный файл:

```
read_many_files(paths=["README.md", "docs/**/*.md", "assets/logo.png"], exclude=["docs/OLD_README.md"])
```

Прочитать все файлы JavaScript, но явно включить тестовые файлы и все JPEG в папке `images`:

```
read_many_files(paths=["**/*.js"], include=["**/*.test.js", "images/**/*.jpg"], useDefaultExcludes=False)
```

## Важные примечания

- **Обработка бинарных файлов:**
  - **Файлы изображений/PDF/аудио/видео:** Инструмент может считывать распространенные типы изображений (PNG, JPEG и т. д.), PDF, аудио (mp3, wav) и видео (mp4, mov) файлы, возвращая их в виде данных, закодированных в base64. Эти файлы _должны_ быть явно указаны в шаблонах `paths` или `include` (например, путем указания точного имени файла, такого как `video.mp4`, или шаблона, такого как `*.mov`).
  - **Другие бинарные файлы:** Инструмент пытается обнаружить и пропустить другие типы бинарных файлов, исследуя их исходное содержимое на наличие нулевых байтов. Инструмент исключает эти файлы из своего вывода.
- **Производительность:** Чтение очень большого количества файлов или очень больших отдельных файлов может быть ресурсоемким.
- **Специфика пути:** Убедитесь, что пути и шаблоны glob правильно указаны относительно целевого каталога инструмента. Для файлов изображений/PDF убедитесь, что шаблоны достаточно специфичны, чтобы их включить.
- **Исключения по умолчанию:** Помните о шаблонах исключений по умолчанию (таких как `node_modules`, `.git`) и используйте `useDefaultExcludes=False`, если вам нужно их переопределить, но делайте это осторожно.
